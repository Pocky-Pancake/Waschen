# Waschen

This is a simple bot made for the ascendance of a bookworm discord server (https://discord.gg/honzuki).
It's not finished but all the essential is there.
This bot uses nextcord.

```
$ pip install -U nextcord
```

## How it works

This bot deletes every messages with no valid links or attachments. Users sending such messages will be DM'd a message.
If the user has the "manage-messages" permission, their messages will bypass the restriction.

If a message has a valid link or an attachment, a thread will be autogenerated.
Users may delete and rename the thread (using the embed & buttons the bot sended) on the 10 first minutes as long as they are the one who started the thread.
The /rename command can be used after the 10 minutes as an alternative.

This bot allows keeping the meme channel as moderated as possible while keeping the ability of discussing memes via threads.

The bot can also log events.

## Setup

### Making the `.env` file

To run the bot, a `.env` file must be made with the following content:

```
TOKEN=your_discord_bot_token
GLOBAL_LOG=global_log_channel_id
```

Replace `your_discord_bot_token` with your discord bot's token and `global_log_channel_id` with the channel id of a logging channel. The global logging channel will output the log of every server the bot is on. The `GLOBAL_LOG` env can be omitted for no global logging.

Once the `.env` file is made, you may now run the `main.py` file.

### Preparing the bot in the server

A filter channel must be set up in the server via the /add_channel command.

```
/add_channel channel:target_channel as:filter channel
```

Target channel must be a valid "Text Channel" (No Thread, Voice Chat, Forum Thread).
Once the filter channel is made, every message in the filter channel will be verified by the bot.
